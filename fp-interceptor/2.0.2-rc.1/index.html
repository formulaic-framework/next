<!DOCTYPE html>
<html lang="en">
  <head>
        <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>FP Interceptor :: Formulaic Docs (Next)</title>
    <meta name="generator" content="Antora 1.0.0">
    <link rel="stylesheet" href="../../_/css/site.css">
    <link rel="stylesheet" href="https://unpkg.com/@material/banner@14.0.0/dist/mdc.banner.min.css">

    <script src="../../_/js/vendor/material/material-components-web.min.js"></script>

    <script src="../../_/js/vendor/highlight/highlight.min.js"></script>
    <script src="../../_/js/vendor/highlight/asciidoc.min.js"></script>
    <script src="../../_/js/vendor/highlight/groovy.min.js"></script>
    <script src="../../_/js/vendor/highlight/javascript.min.js"></script>
    <script src="../../_/js/vendor/highlight/bash.min.js"></script>
    <script src="../../_/js/vendor/highlight/typescript.min.js"></script>

    <script src="../../_/js/vendor/tippy/popper.js"></script>
    <script src="../../_/js/vendor/tippy/tippy.js"></script>

    <script src="../../_/js/vendor/clipboardjs/clipboard.min.js"></script>
  </head>
  <body class="article">
    <div class="mdc-banner" role="banner">
  <div class="mdc-banner__fixed">
    <div class="mdc-banner__content" role="alertdialog" aria-live="assertive">
      <div class="mdc-banner__graphic-text-wrapper">
        <div class="mdc-banner__text">
          <b>Unreleased Documentation</b> - This documentation reflects features that have not been released.
        </div>
      </div>
    </div>
  </div>
</div>
<header class="mdc-top-app-bar mdc-top-app-bar--fixed">
  <div class="mdc-top-app-bar__row">
    <section class="mdc-top-app-bar__section mdc-top-app-bar__section--align-start">
      <img class="toolbar-logo" src="../../_/img/tabler-icons/math-function.svg" viewBox="20 0 80 100"
        alt="Icon representing Formulaic">
      <span class="mdc-top-app-bar__title">Formulaic Docs (Next)</span>
    </section>

    <section class="mdc-top-app-bar__section mdc-top-app-bar__section--align-end" role="toolbar">
      <i class="material-icons mdc-icon-button search" tabindex="0" role="button">
        search
      </i>
    </section>
  </div>

  <div class="mdc-top-app-bar__row sdp-top-app-bar__search mdc-drawer-app-content hide">
    <section class="mdc-top-app-bar__section">
      <i class="material-icons mdc-icon-button search-arrow-back" tabindex="0" role="button" title="Close search">
        arrow_back
      </i>

      <div class="mdc-text-field search expanded">
        <input type="text" id="search-input" class="mdc-text-field__input search" />
        <label class="mdc-floating-label mdc-floating-label--float-above" for="search-input">
          Search the docs
        </label>
      </div>

      <i class="material-icons mdc-icon-button search-clear-query" role="button" tabindex="0" title="Clear search">
        close
      </i>
    </section>
  </div>
</header>
    <div class="body">
<div class="toolbar mobileOnly" role="navigation">
  <button id="toolbar-nav-toggle" class="mdc-icon-button material-icons mdc-icon-button">menu</button>
  <a href="../../intro/" class="home-link"></a>
<span class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="./">FP Interceptor</a></li>
    <li><a href="./">Overview</a></li>
  </ul>
</span>
</div>
<div class="nav-container"  data-component="fp-interceptor" data-version="2.0.2-rc.1">
  <aside class="nav-container">
    <div class="panels">
          <div class="nav-trees">
      <div class="version-box">
        <select data-component="intro" class="select-version">
            <option value="master">
              master
            </option>
        </select>
      </div>
        <div data-component="intro" data-version="master" class="">
          <div class="nav-item is-link">
              <i class="material-icons show-more" aria-hidden="true">chevron_right</i>
            <a  class="" href="../../intro/">
              Introduction
            </a>
          </div>
          <div class="nav-children-panel hide">
             
   
     
       
   
     
      <div class="nav-item is-link">
        
          
            <a  class="spacer" href="../../intro/">Introduction</a>              </div>
           
     
      <div class="nav-item is-link">
        
          
            <a  class="spacer" href="../../intro/docs/">Reading the Documentation</a>              </div>
                    </div>
        </div>
    </div>      
    <div class="clear"></div>
    <div class="nav-trees">
      <div class="version-box">
        <select data-component="fp" class="select-version">
            <option value="2.1.0-rc.1">
              2.1.0-rc.1
            </option>
        </select>
      </div>
        <div data-component="fp" data-version="2.1.0-rc.1" class="">
          <div class="nav-item is-link">
              <i class="material-icons show-more" aria-hidden="true">chevron_right</i>
            <a  class="" href="../../fp/2.1.0-rc.1/">
              Data Types (FP)
            </a>
          </div>
          <div class="nav-children-panel hide">
             
   
     
       
   
     
      <div class="nav-item is-link">
        
          
            <a  class="spacer" href="../../fp/2.1.0-rc.1/">Overview</a>              </div>
           
     
      <div class="nav-item is-link">
        
          
            <a  class="spacer" href="../../fp/2.1.0-rc.1/fp/">FP Interface</a>              </div>
           
     
      <div class="nav-item is-link">
        
          
            <a  class="spacer" href="../../fp/2.1.0-rc.1/data/">Data (Either)</a>              </div>
           
     
      <div class="nav-item is-link">
        
          
            <a  class="spacer" href="../../fp/2.1.0-rc.1/common/">Common FP Instances</a>              </div>
           
     
      <div class="nav-item is-link">
        
          
            <a  class="spacer" href="../../fp/2.1.0-rc.1/custom/">Creating Custom Data Classes</a>              </div>
                    </div>
        </div>
    </div>      
    <div class="clear"></div>
    <div class="nav-trees">
      <div class="version-box">
        <select data-component="entity-service" class="select-version">
            <option value="3.0.2-rc.1">
              3.0.2-rc.1
            </option>
        </select>
      </div>
        <div data-component="entity-service" data-version="3.0.2-rc.1" class="">
          <div class="nav-item is-link">
              <i class="material-icons show-more" aria-hidden="true">chevron_right</i>
            <a  class="" href="../../entity-service/3.0.2-rc.1/">
              Entity Service
            </a>
          </div>
          <div class="nav-children-panel hide">
             
   
     
       
   
     
      <div class="nav-item is-link">
        
          
            <a  class="spacer" href="../../entity-service/3.0.2-rc.1/">Overview</a>              </div>
           
     
      <div class="nav-item is-link">
        
          
            <a  class="spacer" href="../../entity-service/3.0.2-rc.1/usage/">Entity Service Usage</a>              </div>
                    </div>
        </div>
    </div>      
    <div class="clear"></div>
    <div class="nav-trees">
      <div class="version-box">
        <select data-component="hash" class="select-version">
            <option value="0.2.2">
              0.2.2
            </option>
        </select>
      </div>
        <div data-component="hash" data-version="0.2.2" class="">
          <div class="nav-item is-link">
              <i class="material-icons show-more" aria-hidden="true">chevron_right</i>
            <a  class="" href="../../hash/0.2.2/">
              Hashing Module
            </a>
          </div>
          <div class="nav-children-panel hide">
             
   
     
       
   
     
      <div class="nav-item is-link">
        
          
            <a  class="spacer" href="../../hash/0.2.2/">Overview</a>              </div>
                    </div>
        </div>
    </div>      
    <div class="clear"></div>
    <div class="nav-trees">
      <div class="version-box">
        <select data-component="id" class="select-version">
            <option value="0.2.2">
              0.2.2
            </option>
        </select>
      </div>
        <div data-component="id" data-version="0.2.2" class="">
          <div class="nav-item is-link">
              <i class="material-icons show-more" aria-hidden="true">chevron_right</i>
            <a  class="" href="../../id/0.2.2/">
              ID Generation
            </a>
          </div>
          <div class="nav-children-panel hide">
             
   
     
       
   
     
      <div class="nav-item is-link">
        
          
            <a  class="spacer" href="../../id/0.2.2/">Overview</a>              </div>
           
     
      <div class="nav-item is-link">
        
          
            <a  class="spacer" href="../../id/0.2.2/formats/">Supported ID Formats</a>              </div>
           
     
      <div class="nav-item is-link">
        
          
            <a  class="spacer" href="../../id/0.2.2/setup/">ID Generator Setup</a>              </div>
           
     
      <div class="nav-item is-link">
        
          
            <a  class="spacer" href="../../id/0.2.2/usage/">ID Generator Usage</a>              </div>
                    </div>
        </div>
    </div>      
    <div class="clear"></div>
    <div class="nav-trees">
      <div class="version-box">
        <select data-component="fp-interceptor" class="select-version">
            <option value="2.0.2-rc.1">
              2.0.2-rc.1
            </option>
        </select>
      </div>
        <div data-component="fp-interceptor" data-version="2.0.2-rc.1" class="">
          <div class="nav-item is-link">
              <i class="material-icons show-more" aria-hidden="true">chevron_right</i>
            <a  class=" is-current-page" href="./">
              FP Interceptor
            </a>
          </div>
          <div class="nav-children-panel hide">
             
   
     
       
   
     
      <div class="nav-item is-link">
        
          
            <a  class="spacer is-current-page" href="./">Overview</a>              </div>
           
     
      <div class="nav-item is-link">
        
          
            <a  class="spacer" href="install/">Installation</a>              </div>
           
     
      <div class="nav-item is-link">
        
          
            <a  class="spacer" href="usage/">Usage</a>              </div>
                    </div>
        </div>
    </div>      
    <div class="clear"></div>
    <div class="nav-trees">
      <div class="version-box">
        <select data-component="acl" class="select-version">
            <option value="1.0.1">
              1.0.1
            </option>
        </select>
      </div>
        <div data-component="acl" data-version="1.0.1" class="">
          <div class="nav-item is-link">
              <i class="material-icons show-more" aria-hidden="true">chevron_right</i>
            <a  class="" href="../../acl/1.0.1/">
              Authorization (ACL) Utilities
            </a>
          </div>
          <div class="nav-children-panel hide">
             
   
     
       
   
     
      <div class="nav-item is-link">
        
          
            <a  class="spacer" href="../../acl/1.0.1/">Overview</a>              </div>
           
     
       
   
     
      <div class="nav-item is-link">
        <i class="material-icons show-more" aria-hidden="true">chevron_right</i>
          
            <a  class="" href="../../acl/1.0.1/package/">Creating an ACL Package</a>              </div>
       
        <div class="nav-children-panel hide">
           
   
     
      <div class="nav-item is-link">
        
          
            <a  class="spacer" href="../../acl/1.0.1/package/01-roles/">Define User Roles</a>              </div>
           
     
      <div class="nav-item is-link">
        
          
            <a  class="spacer" href="../../acl/1.0.1/package/02-subjects/">Define ACL Subjects</a>              </div>
           
     
      <div class="nav-item is-link">
        
          
            <a  class="spacer" href="../../acl/1.0.1/package/03-abilities/">Define Abilities</a>              </div>
           
     
      <div class="nav-item is-link">
        
          
            <a  class="spacer" href="../../acl/1.0.1/package/04-rules/">Defining Rules/Permissions</a>              </div>
                  </div>
              </div>
        </div>
    </div>      
    <div class="clear"></div>
    <div class="nav-trees">
      <div class="version-box">
        <select data-component="auth-module" class="select-version">
            <option value="0.2.2">
              0.2.2
            </option>
        </select>
      </div>
        <div data-component="auth-module" data-version="0.2.2" class="">
          <div class="nav-item is-link">
              <i class="material-icons show-more" aria-hidden="true">chevron_right</i>
            <a  class="" href="../../auth-module/0.2.2/">
              Authentication Module
            </a>
          </div>
          <div class="nav-children-panel hide">
             
   
     
       
   
     
      <div class="nav-item is-link">
        
          
            <a  class="spacer" href="../../auth-module/0.2.2/">Overview</a>              </div>
           
     
      <div class="nav-item is-link">
        
          
            <a  class="spacer" href="../../auth-module/0.2.2/jwt-structure/">Defining a JWT Structure</a>              </div>
           
     
      <div class="nav-item is-link">
        
          
            <a  class="spacer" href="../../auth-module/0.2.2/importing/">Importing the Auth Module</a>              </div>
           
     
      <div class="nav-item is-link">
        
          
            <a  class="spacer" href="../../auth-module/0.2.2/basic/">Basic Authentication Usage</a>              </div>
           
     
      <div class="nav-item is-link">
        
          
            <a  class="spacer" href="../../auth-module/0.2.2/acl/">Advanced Authorization Usage</a>              </div>
                    </div>
        </div>
    </div>      
    <div class="clear"></div>

    </div>
  </aside>
</div>
<main>
<article class="doc">
        <div class="on-this-page-container desktopOnly">
    <aside>
        <div class="toc-header">
            <span class="toc-title">On this page</span>
            <a class="edit-page" href="https://github.com/formulaic-framework/formulaic/edit/main/packages/fp-interceptor/docs/modules/ROOT/pages/index.adoc">
                <div class="mdc-ripple-surface edit-page">
                    <div class="mdc-button__ripple"></div>
                    <i class="material-icons-outlined mdc-button__icon" aria-hidden="true">edit</i>
                    <span class="mdc-button__label">Edit on GitHub</span>
                </div>
            </a>
        </div>
        <ul id="toc" class="toc">            

        </ul>
    </aside>
</div>

        <div class="contents">
                <h1 class="page">FP Interceptor</h1>
            <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Formulaic&#8217;s <a href="../../fp/2.1.0-rc.1/" class="page">data types library (FP)</a> can be used just on the backend for internal structure,
but it excels when used to format outgoing responses in conjunction with the FP Interceptor.</p>
</div>
<div class="paragraph">
<p>The <code>FPInterceptor</code> simply intercepts outgoing responses, and uses <a href="../../fp/2.1.0-rc.1/" class="page">FP</a>, <code>class-validator</code>, and <code>class-transformer</code> methods under the hood to filter, transform, and format outgoing responses.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_background"><a class="anchor" href="#_background"></a>Background</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Formulaic&#8217;s FP library defines an standardized object structure
that makes it easy and safe to work with data,
both at compile time through type statements, and also contains data inside objects that
allows for run-time type checking and discrimination of data types.</p>
</div>
<div class="paragraph">
<p>Learn more about FP in the <a href="../../fp/2.1.0-rc.1/" class="page">FP module documentation</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_features"><a class="anchor" href="#_features"></a>Features</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_easy_flow_control"><a class="anchor" href="#_easy_flow_control"></a>Easy Flow Control</h3>
<div class="paragraph">
<p>FP provides great control over data flow, with strongly typed data, even in places where JavaScript/TypeScript throws away type data (Promise rejection, <code>try/catch</code> error statements),
and comes with utilities like <code>unless</code>, <code>mapIf</code>, and more that allow easy implementation of default values and error recovery backup flows.</p>
</div>
</div>
<div class="sect2">
<h3 id="_strongly_typed_client_generation"><a class="anchor" href="#_strongly_typed_client_generation"></a>Strongly Typed Client Generation</h3>
<div class="paragraph">
<p>Many OpenAPI client generators do not type error responses, likely because rejected Promises and
<code>catch</code> statements have no easy way to be strongly typed.</p>
</div>
<div class="paragraph">
<p><a href="../../fp/2.1.0-rc.1/" class="page">FP</a> allows for all data to be transmitted as success data (documented as a union type in OpenAPI),
and makes it easy to distinguish success cases from various error causes on the front-end.</p>
</div>
</div>
<div class="sect2">
<h3 id="_better_debug_data_visibility"><a class="anchor" href="#_better_debug_data_visibility"></a>Better Debug Data Visibility</h3>
<div class="paragraph">
<p>There are many places where the backend holds data that would be useful for developers,
yet presents privacy or security risks to share with the user.</p>
</div>
<div class="paragraph">
<p>FP Interceptor makes use of <code>class-transformer</code> under the hood, configured to strip out any data
not explicitly marked as information to send to the client.</p>
</div>
<div class="paragraph">
<p>This enables a number of benefits when using <code>FPInterceptor</code>:</p>
</div>
<div class="sect3">
<h4 id="_improved_log_output"><a class="anchor" href="#_improved_log_output"></a>Improved Log Output</h4>
<div class="paragraph">
<p>Error responses, like <code>DatabaseException</code>, can include the entire exception message
and stacktrace to be included in logs, without the user seeing the cause.</p>
</div>
</div>
<div class="sect3">
<h4 id="_dev_only_output"><a class="anchor" href="#_dev_only_output"></a>Dev-Only Output</h4>
<div class="paragraph">
<p><code>FPInterceptor</code> uses <code>class-transformer</code> configuration (namely, groups), to transform
and conditionally include information in responses.</p>
</div>
<div class="paragraph">
<p>By default, <code>FPInterceptor</code> uses the <code>NODE_ENV</code> environment variable, and will automatically
include more verbose information if the server is explicitly running in <code>"development"</code> mode.</p>
</div>
</div>
</div>
</div>
</div>
            <div class="nav-buttons">
        <a class="next" href="                install/"
        >
            <div class="title">
                Installation
            </div>
            <div class="arrow">
                <i class="material-icons show-more" aria-hidden="true">arrow_forward</i>
            </div>
        </a>
</div>        </div>
</article>
<div class="footer">
  <p>© Copyright 2022 Flyyn</p>
  <p>Built with <a href="https://antora.org">Antora</a> using a <a href="https://github.com/boozallen/sdp-docs-skin">custom UI Bundle</a>.</p>
</div>
</main>
</div>
    <script src="../../_/js/site.js"></script>
<script async src="../../_/../search-index.js"></script>
<script>
  const banner = new mdc.banner.MDCBanner(document.querySelector(".mdc-banner"));
  banner.open();
  const bannerHeight = 77; //banner.root.offsetHeight;

  const docHeader = document.querySelector(".mdc-top-app-bar");
  docHeader.style = `top: ${bannerHeight}px;`;
  const headerHeight = docHeader.offsetHeight;

  const docBody = document.querySelector(".body");
  docBody.style = `top: ${bannerHeight + headerHeight}px;`;
</script>
  </body>
</html>
